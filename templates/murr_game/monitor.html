{% load static %}


{% block css %}
{% endblock css %}

{% block monitor %}

    <div id="monitor">

        <button v-show="show_tawern === false"
                v-on:click="come_to_tawern"
                class="btn btn-primary">
            Войти в [[ name ]]
        </button>


        <div v-if="show_tawern">
            <div class="base_monitor_row row mx-auto">


                {# base_monitor_row-img #}
                <div class="base_monitor_row-img col-7 p-1 m-0">
                    <img src="{% static "/img/murr_game/Tawern_Barman.png" %}" class="card" alt="Таве">
                </div>

                {# base_monitor_row-log #}
                <div class="base_monitor_row-log col-3 p-1 m-0">

                    <div class="log_panel ">
                        <p class="log_panel_message "
                           v-for="log in logs">
                            [[ log ]]
                        </p>
                    </div>

                    <div class="d-flex justify-content-center">
                        <div class="btn-group btn-group-lg mb-4" role="group">
                            <button
                                    type="button"
                                    class="btn btn-secondary "
                                    data-toggle="tooltip"
                                    v-on:click="show_create_group_panel"
                                    title="Создать группу">

                                <i class="fas fa-user-plus"></i>

                            </button>

                            <button
                                    type="button"
                                    class="btn btn-secondary"
                                    data-toggle="tooltip"
                                    v-on:click="show_available_group"
                                    title="Найти группу">

                                <i class="fas fa-users"></i>

                            </button>
                        </div>
                    </div>
                </div>

                {# base_monitor_row-group #}
                <div class="base_monitor_row-group col-2 p-1 m-0">

                    <div class="murren_card"
                         :class="{'bg-primary': show_murren_group_menu}">

                        <div class="row p-0 m-0">

                            <div class="col-8 p-0 m-0 d-flex align-items-center text-center">
                                <div class="murren_card_data mx-auto">
                                    <h5 class="p-0 m-0">[[ murren_name ]]</h5>
                                    <table class=" ">
                                        <th style="color: red">[[ hp ]]</th>
                                        <th><img src="/static/img/murr_game/hp.svg" width="15" height="15" alt="">
                                        </th>
                                        <th style="color: blue">[[ mp ]]</th>
                                        <th><img src="/static/img/murr_game/mp.svg" width="15" height="15" alt="">
                                        </th>
                                    </table>
                                </div>
                            </div>

                            <div class="col-4 p-0 m-0 d-flex align-items-center">
                                <img v-bind:src="avatar_url"
                                     class="img-thumbnail p-0 m-0 "
                                     alt="...">
                            </div>


                        </div>
                    </div>

                    <div v-if="show_murren_group_menu">
                        <button class="btn bg-info btn-sm fixed-bottom mb-3" style="position: absolute">Выйти из
                            группы
                        </button>
                    </div>
                    <div v-else>
                    </div>

                </div>
            </div>

            <div class="active_panel">

                <div class="row m-0 p-0">
                    <div class="col-9">

                        <div v-if="show_create_group_menu">

                            <div class="form-inline">

                                <label for="group_name_input" class="mr-2 sr-only">Название группы:</label>
                                <input v-model.lazy.trim="group_name_input"
                                       @keyup.enter="create_group_by_name"
                                       maxlength="20"
                                       id="group_name_input"
                                       placeholder="Введи название группы"
                                       class="form-control">
                                <button
                                        v-on:click="create_group_by_name"
                                        type="submit"
                                        class="btn btn-primary">
                                    Создать группу
                                </button>
                            </div>
                        </div>

                        <div v-else>
                            <p>Что сделаем, хозяин?</p>
                        </div>

                        <div v-if="available_group">

                            <p v-for="i in available_group">
                                [[ i.group_name ]]

                                <a href="#"
                                   v-on:click.prevent ="remove_chat_member(i.id)"
                                   class="badge badge-danger">
                                    Удалить</a>
                            </p>
                            <br>

                        </div>
                        <div v-else></div>


                    </div>
                    <div class="col-3 m-0 p-0">
                        <div v-if="success_group_created">
                            <p>Группа <span class="text-dark">[[ group_name_input ]]</span> ждет тебя!</p>
                        </div>
                        <div v-else>Пока ничего не произошло</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock monitor %}


{% block js %}
{% endblock js %}
